// -- user code here --

/* --- start generated code --- */

// Generated by Phaser Editor 1.4.3 (Phaser v2.6.2)


class Preloader extends Phaser.State {

	/**
	 * Preloader.
	 */
	constructor() {

		super();

	}

	init() {

		this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
		this.scale.pageAlignHorizontally = true;
		this.scale.pageAlignVertically = true;
		this.game.renderer.renderSession.roundPixels = true;

	}

	preload() {

		this.load.pack('preloader', 'assets/pack.json');

	}

	create() {

		this.preloadGameAudio();

	}

	/* state-methods-begin */
	// TODO:
	// 如何直接取用外部 json 檔
	preloadGameAudio() {
		let audioSprite_JSON = {
			"resources": [
				"sound.ogg",
				"sound.m4a",
				"sound.mp3",
				"sound.ac3"
			],
			"spritemap": {
				"lose_single": {
					"start": 0,
					"end": 2.0480045351473923,
					"loop": false
				},
				"win_single": {
					"start": 4,
					"end": 6.048004535147392,
					"loop": false
				},
				"bounce": {
					"start": 8,
					"end": 8.38689342403628,
					"loop": false
				},
				"bg_music_multi": {
					"start": 10,
					"end": 156.11201814058956,
					"loop": false
				},
				"bg_music_single": {
					"start": 158,
					"end": 300.5280045351474,
					"loop": false
				},
				"hit": {
					"start": 302,
					"end": 302.36931972789114,
					"loop": false
				}
			}
		};

		this.game.load.audioSprite(
			'sound',
			'assets/audio/sound.ogg',
			null,
			audioSprite_JSON);
	}

	// 確認 audio 已經 decode 完成才進入遊戲
	update() {
		if (this.game.cache.isSoundDecoded('sound')) {
			this.nextState();
		}
	}

	nextState() {
		this.game.state.start("Main");
	}

	/* state-methods-end */

}
/* --- end generated code --- */
// -- user code here --
export default Preloader;